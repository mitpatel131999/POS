(this["webpackJsonpcar-management-frontend"]=this["webpackJsonpcar-management-frontend"]||[]).push([[0],{71:function(e,t,a){e.exports=a(96)},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var l=a(0),n=a.n(l),r=a(15),c=a.n(r),o=a(16),s=a(6),m=a(102);const i="https://mitpatelr1999.pythonanywhere.com",u=Object(l.createContext)(),p=e=>{let{children:t}=e;const[a,r]=Object(l.useState)(null);Object(l.useEffect)(()=>{const e=localStorage.getItem("token");e&&m.a.get("".concat(i,"/profiles/api/profile/"),{headers:{Authorization:"Token ".concat(e)}}).then(e=>{console.log("Profile fetched successfully:",e.data),r(e.data)}).catch(e=>{console.log("Failed to fetch profile:",e),localStorage.removeItem("token")})},[]);return n.a.createElement(u.Provider,{value:{user:a,login:async(e,t)=>{console.log("Attempting login with:",{username:e,password:t});try{const a=await m.a.post("".concat(i,"/profiles/api/login/"),{username:e,password:t});console.log("Login response:",a.data),localStorage.setItem("token",a.data.token),r({id:a.data.user_id,email:a.data.email,role:a.data.role})}catch(a){throw console.log("Login failed:",a),a}},logout:()=>{console.log("Logging out"),localStorage.removeItem("token"),r(null)},register:async(e,t,a,l)=>{try{console.log("Attempting registration with:",{username:e,email:t,password:a,role:l});const n=await m.a.post("".concat(i,"/profiles/api/register/"),{username:e,email:t,password:a,role:l});return console.log("Registration successful:",n.data),n.data}catch(n){throw console.log("Registration failed:",n),n}},updateProfile:async e=>{const t=localStorage.getItem("token");console.log("Updating profile with:",e);try{const a=await m.a.put("".concat(i,"/profiles/api/profile/"),e,{headers:{Authorization:"Token ".concat(t)}});console.log("Profile updated:",a.data),r(a.data)}catch(a){throw console.log("Profile update failed:",a),a}}}},t)};var d=u;var b=()=>{const[e,t]=Object(l.useState)(""),[a,r]=Object(l.useState)(""),[c,m]=Object(l.useState)(null),{login:i}=Object(l.useContext)(d),u=Object(s.p)();return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("h2",null,"Login"),c&&n.a.createElement("div",{className:"alert alert-danger"},JSON.stringify(c)),n.a.createElement("form",{onSubmit:async t=>{t.preventDefault(),console.log("Submitting login form with:",{username:e,password:a});try{await i(e,a),console.log("Login successful, navigating to dashboard."),u("/dashboard")}catch(r){var l,n;console.log("Login failed:",(null===(l=r.response)||void 0===l?void 0:l.data)||r),m((null===(n=r.response)||void 0===n?void 0:n.data)||"Login failed")}}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Username"),n.a.createElement("input",{type:"text",className:"form-control",value:e,onChange:e=>t(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",className:"form-control",value:a,onChange:e=>r(e.target.value),required:!0})),n.a.createElement("button",{type:"submit",className:"btn btn-primary mt-3"},"Login")),n.a.createElement("p",{className:"mt-3"},"Don't have an account? ",n.a.createElement(o.b,{to:"/register"},"Register")))};a(17);var E=()=>{const[e,t]=Object(l.useState)(""),[a,r]=Object(l.useState)(""),[c,m]=Object(l.useState)(""),[i,u]=Object(l.useState)("driver"),[p,b]=Object(l.useState)(null),{register:E}=Object(l.useContext)(d),g=Object(s.p)();return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("div",{className:"card shadow-sm p-4"},n.a.createElement("h2",{className:"card-title mb-4"},"Register"),p&&n.a.createElement("div",{className:"alert alert-danger"},JSON.stringify(p)),n.a.createElement("form",{onSubmit:async t=>{t.preventDefault(),console.log("Submitting registration form with:",{username:e,email:a,password:c,role:i});try{await E(e,a,c,i),console.log("Registration successful, navigating to login."),g("/login")}catch(r){var l,n;console.log("Registration failed:",(null===(l=r.response)||void 0===l?void 0:l.data)||r),b((null===(n=r.response)||void 0===n?void 0:n.data)||"Registration failed")}}},n.a.createElement("div",{className:"form-group mb-3"},n.a.createElement("label",null,"Username"),n.a.createElement("input",{type:"text",className:"form-control",value:e,onChange:e=>t(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group mb-3"},n.a.createElement("label",null,"Email"),n.a.createElement("input",{type:"email",className:"form-control",value:a,onChange:e=>r(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group mb-3"},n.a.createElement("label",null,"Password"),n.a.createElement("input",{type:"password",className:"form-control",value:c,onChange:e=>m(e.target.value),required:!0})),n.a.createElement("div",{className:"form-group mb-3"},n.a.createElement("label",null,"Role"),n.a.createElement("select",{className:"form-control",value:i,onChange:e=>u(e.target.value),required:!0},n.a.createElement("option",{value:"driver"},"Driver"),n.a.createElement("option",{value:"renter"},"Renter"))),n.a.createElement("button",{type:"submit",className:"btn btn-primary mt-3"},"Register")),n.a.createElement("p",{className:"mt-3"},"Already have an account? ",n.a.createElement(o.b,{to:"/login"},"Login"))))};var g=()=>{const[e,t]=Object(l.useState)(null),a=Object(s.p)();Object(l.useEffect)(()=>{(async()=>{const e=localStorage.getItem("token");try{const a=await m.a.get("".concat(i,"/trips/api/check_ongoing_trip/"),{headers:{Authorization:"Token ".concat(e)}});"in_progress"===a.data.status?t(a.data.trip_id):t(null)}catch(a){console.error("Error checking ongoing trip:",a)}})()},[]);return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("div",{className:"card p-4 shadow-sm"},n.a.createElement("h2",{className:"mb-4 text-center"},"Driver Dashboard"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},n.a.createElement("span",null,"Profile"),n.a.createElement("button",{className:"btn btn-primary",onClick:()=>{a("/profile")}},"Go")),e?n.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},n.a.createElement("span",null,"Trip Actions"),n.a.createElement("button",{className:"btn btn-warning",onClick:()=>{a("/trip-actions",{state:{tripId:e}})}},"Go")):n.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},n.a.createElement("span",null,"Start Trip"),n.a.createElement("button",{className:"btn btn-success",onClick:()=>{a("/start-trip")}},"Go")),n.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},n.a.createElement("span",null,"Previous Trips"),n.a.createElement("button",{className:"btn btn-info",onClick:()=>{a("/previous-trips")}},"Go")))))};var h=()=>{const e=Object(s.p)();return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("div",{className:"card shadow-sm p-4"},n.a.createElement("h2",{className:"card-title mb-4"},"Car Owner Dashboard"),n.a.createElement("ul",{className:"list-group list-group-flush"},n.a.createElement("li",{className:"list-group-item"},n.a.createElement(o.b,{to:"/profile",className:"btn btn-outline-primary btn-block"},"Profile")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement(o.b,{to:"/previous-trips",className:"btn btn-outline-primary btn-block"},"Previous Trips")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement("button",{className:"btn btn-primary btn-block",onClick:()=>{e("/manage-cars")}},"Manage Cars")))))},v=a(106),f=a(105),N=a(100),y=a(103),O=a(104),k=a(107),_=a(64),j=a(65),C=a.n(j);var w=e=>{let{car:t}=e;const[a,r]=Object(l.useState)(!1),c=Object(l.useRef)(null),o=Object(l.useRef)();if(!t)return null;return n.a.createElement("div",{className:"container mt-4"},n.a.createElement("div",{className:"card shadow-sm p-4",ref:o},n.a.createElement("h3",{className:"card-title"},"Car Details"),n.a.createElement("div",{className:"card-body"},n.a.createElement("p",{className:"card-text"},n.a.createElement("strong",null,"ID:")," ",t.car_id),n.a.createElement("p",{className:"card-text"},n.a.createElement("strong",null,"Model:")," ",t.model),n.a.createElement("p",{className:"card-text"},n.a.createElement("strong",null,"License Plate:")," ",t.license_plate),n.a.createElement("p",{className:"card-text"},n.a.createElement("strong",null,"Available:")," ",t.available?"Yes":"No"),n.a.createElement("button",{className:"btn btn-primary mt-3",onClick:()=>{r(!0)}},"Generate QR Code"),a&&n.a.createElement("div",{className:"mt-3"},n.a.createElement("div",{ref:c},n.a.createElement(_.a,{value:String(t.car_id),size:256})),n.a.createElement("button",{className:"btn btn-secondary mt-3",onClick:async()=>{const e=(await C()(c.current)).toDataURL("image/png"),a=document.createElement("a");a.href=e,a.download=String(t.license_plate)+"_qr_code.png",a.click()}},"Download QR Code")))))};var S=()=>{const[e,t]=Object(l.useState)([]),[a,r]=Object(l.useState)({model:"",licensePlate:""}),[c,o]=Object(l.useState)(""),[s,u]=Object(l.useState)(!1),[p,d]=Object(l.useState)(null);Object(l.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),a=await m.a.get("".concat(i,"/cars/api/cars/"),{headers:{Authorization:"Token ".concat(e)}});t(a.data)}catch(e){o("Error fetching cars")}})()},[]);const b=()=>{u(!s)};return n.a.createElement("div",{className:"container mt-5"},n.a.createElement(v.a,{className:"p-4 shadow-sm"},n.a.createElement("h2",null,"Manage Cars"),c&&n.a.createElement(f.a,{variant:"danger"},c),n.a.createElement(N.a,{variant:"primary",onClick:b,className:"mb-3"},"Add Car"),n.a.createElement(y.a,{show:s,onHide:b},n.a.createElement(y.a.Header,{closeButton:!0},n.a.createElement(y.a.Title,null,"Add Car")),n.a.createElement(y.a.Body,null,n.a.createElement(O.a,{onSubmit:async l=>{l.preventDefault();try{const l=localStorage.getItem("token"),n=await m.a.post("".concat(i,"/cars/api/cars/"),{model:a.model,license_plate:a.licensePlate},{headers:{Authorization:"Token ".concat(l)}});t([...e,n.data]),r({model:"",licensePlate:""}),u(!1)}catch(n){o("Error adding car")}}},n.a.createElement(O.a.Group,{controlId:"formCarModel",className:"mb-3"},n.a.createElement(O.a.Label,null,"Car Model"),n.a.createElement(O.a.Control,{type:"text",value:a.model,onChange:e=>r({...a,model:e.target.value}),required:!0})),n.a.createElement(O.a.Group,{controlId:"formCarLicensePlate",className:"mb-3"},n.a.createElement(O.a.Label,null,"License Plate"),n.a.createElement(O.a.Control,{type:"text",value:a.licensePlate,onChange:e=>r({...a,licensePlate:e.target.value}),required:!0})),n.a.createElement(N.a,{variant:"primary",type:"submit"},"Add Car")))),n.a.createElement("div",{className:"mt-3"},n.a.createElement("h3",null,"Cars"),n.a.createElement(k.a,null,e.map(a=>n.a.createElement(k.a.Item,{key:a.car_id,className:"d-flex justify-content-between align-items-center"},n.a.createElement("div",null,n.a.createElement("p",{className:"mb-1"},n.a.createElement("strong",null,"Model:")," ",a.model),n.a.createElement("p",{className:"mb-1"},n.a.createElement("strong",null,"License Plate:")," ",a.license_plate)),n.a.createElement("div",null,n.a.createElement(N.a,{variant:"danger",className:"me-2",onClick:()=>(async a=>{try{const l=localStorage.getItem("token");await m.a.delete("".concat(i,"/cars/api/cars/").concat(a,"/"),{headers:{Authorization:"Token ".concat(l)}}),t(e.filter(e=>e.car_id!==a))}catch(l){o("Error removing car")}})(a.car_id)},"Remove"),n.a.createElement(N.a,{variant:"info",onClick:()=>d(a)},"Details"),p&&p.car_id===a.car_id&&n.a.createElement(w,{car:p}))))))))},P=a(101);var D=()=>{const[e,t]=Object(l.useState)([]),[a,r]=Object(l.useState)("");Object(l.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),a=await m.a.get("".concat(i,"/profiles/api/drivers/"),{headers:{Authorization:"Token ".concat(e)}});t(a.data.filter(e=>"driver"===e.role))}catch(e){r("Error fetching drivers")}})()},[]);return n.a.createElement(P.a,{className:"mt-5"},n.a.createElement("h3",null,"Manage Drivers"),a&&n.a.createElement(f.a,{variant:"danger"},a),n.a.createElement(k.a,null,e.map(a=>n.a.createElement(k.a.Item,{key:a.id,className:"d-flex justify-content-between align-items-center"},n.a.createElement("div",null,n.a.createElement("strong",null,a.username)," - ",a.email),n.a.createElement(N.a,{variant:"danger",size:"sm",onClick:()=>(async a=>{try{const l=localStorage.getItem("token");await m.a.delete("".concat(i,"/profiles/api/profile/").concat(a,"/"),{headers:{Authorization:"Token ".concat(l)}}),t(e.filter(e=>e.id!==a))}catch(l){r("Error removing driver")}})(a.id)},"Remove")))))};var R=()=>{const[e,t]=Object(l.useState)([]),[a,r]=Object(l.useState)("");Object(l.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),a=await m.a.get("".concat(i,"/profiles/api/car_owner/"),{headers:{Authorization:"Token ".concat(e)}});t(a.data.filter(e=>"owner"===e.role))}catch(e){r("Error fetching car owners")}})()},[]);return n.a.createElement(P.a,{className:"mt-5"},n.a.createElement("h3",null,"Manage Car Owners"),a&&n.a.createElement(f.a,{variant:"danger"},a),n.a.createElement(k.a,null,e.map(a=>n.a.createElement(k.a.Item,{key:a.id,className:"d-flex justify-content-between align-items-center"},n.a.createElement("div",null,n.a.createElement("strong",null,a.username)," - ",a.email),n.a.createElement(N.a,{variant:"danger",size:"sm",onClick:()=>(async a=>{try{const l=localStorage.getItem("token");await m.a.delete("".concat(i,"/profiles/api/profile/").concat(a,"/"),{headers:{Authorization:"Token ".concat(l)}}),t(e.filter(e=>e.id!==a))}catch(l){r("Error removing car owner")}})(a.id)},"Remove")))))},x=a(61);a(94),a(95);const T={display:"block",position:"fixed",zIndex:1,paddingTop:"100px",left:0,top:0,width:"100%",height:"100%",overflow:"auto",backgroundColor:"rgb(0,0,0)",backgroundColor:"rgba(0,0,0,0.9)"},L={position:"absolute",top:"15px",right:"35px",color:"#f1f1f1",fontSize:"40px",fontWeight:"bold",transition:"0.3s",cursor:"pointer"},F={margin:"auto",display:"block",width:"80%",maxWidth:"700px"};var I=()=>{const[e,t]=Object(l.useState)([]),[a,r]=Object(l.useState)(""),[c,o]=Object(l.useState)(null),[s,u]=Object(l.useState)(null),[p,d]=Object(l.useState)({pickupDate:"",driverName:"",licensePlate:"",status:"all"}),[b,E]=Object(l.useState)([]),[g,h]=Object(l.useState)([]);Object(l.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("token"),a=await m.a.get("".concat(i,"/profiles/api/trips/"),{headers:{Authorization:"Token ".concat(e)}});t(a.data),E([...new Set(a.data.map(e=>e.driver.username))]),h([...new Set(a.data.map(e=>e.car.license_plate))])}catch(e){r("Error fetching trips")}})()},[]);const v=e=>{u(e)},f=e=>{const{name:t,value:a}=e.target;d(e=>({...e,[t]:a}))},N=e.filter(e=>(!p.pickupDate||new Date(e.pick_up_time).toLocaleDateString()===new Date(p.pickupDate).toLocaleDateString())&&(!p.driverName||e.driver.username.toLowerCase().includes(p.driverName.toLowerCase()))&&(!p.licensePlate||e.car.license_plate.toLowerCase().includes(p.licensePlate.toLowerCase()))&&("all"===p.status||e.status===p.status));return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("h2",{className:"mb-4"},"Previous Trips"),a&&n.a.createElement("div",{className:"alert alert-danger"},a),n.a.createElement("div",{className:"mb-4"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-md-3"},n.a.createElement("input",{type:"date",name:"pickupDate",className:"form-control",value:p.pickupDate,onChange:f,placeholder:"Filter by Pickup Date"})),n.a.createElement("div",{className:"col-md-3"},n.a.createElement(x.a,{id:"driverName",onChange:e=>{d(t=>({...t,driverName:e.length>0?e[0]:""}))},options:b,placeholder:"Filter by Driver Name",selected:p.driverName?[p.driverName]:[],className:"typeahead"})),n.a.createElement("div",{className:"col-md-3"},n.a.createElement(x.a,{id:"licensePlate",onChange:e=>{d(t=>({...t,licensePlate:e.length>0?e[0]:""}))},options:g,placeholder:"Filter by Car Rego Number",selected:p.licensePlate?[p.licensePlate]:[],className:"typeahead"})),n.a.createElement("div",{className:"col-md-3"},n.a.createElement("select",{name:"status",className:"form-control",value:p.status,onChange:f},n.a.createElement("option",{value:"all"},"All Trips"),n.a.createElement("option",{value:"pending"},"Pending Trips"),n.a.createElement("option",{value:"in_progress"},"In Progress Trips"),n.a.createElement("option",{value:"completed"},"Completed Trips"))))),0===e.length?n.a.createElement("div",{className:"alert alert-info"},"No previous trips found."):n.a.createElement("ul",{className:"list-group"},N.map(e=>n.a.createElement("li",{key:e.trip_id,className:"list-group-item mb-3"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-12"},n.a.createElement("div",{className:"d-flex justify-content-between align-items-center"},n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement("strong",null,"Driver:")," ",e.driver.username),n.a.createElement("p",null,n.a.createElement("strong",null,"Route No:")," ",e.trip_details.route_no),n.a.createElement("p",null,n.a.createElement("strong",null,"Car Rego:")," ",e.car.license_plate),n.a.createElement("p",null,n.a.createElement("strong",null,"Pick Up Time:")," ",new Date(e.pick_up_time).toLocaleString()),n.a.createElement("p",null,n.a.createElement("strong",null,"Drop Off Time:")," ",e.drop_off_time?new Date(e.drop_off_time).toLocaleString():"N/A")),n.a.createElement("button",{className:"btn btn-primary",onClick:()=>{return t=e.trip_id,void o(c===t?null:t);var t}},c===e.trip_id?"Show Less":"See More")),n.a.createElement("div",{className:"status-box ".concat(e.status)},n.a.createElement("p",null,n.a.createElement("strong",null,"Status:")," ",e.status.replace("_"," ").toUpperCase())))),c===e.trip_id&&n.a.createElement("div",{className:"mt-3"},n.a.createElement("p",null,n.a.createElement("strong",null,"Pick Up Location:")," ",e.pick_up_location),n.a.createElement("p",null,n.a.createElement("strong",null,"Drop Off Location:")," ",e.drop_off_location||"N/A"),n.a.createElement("p",null,n.a.createElement("strong",null,"Pick Up Odometer:")," ",e.pick_up_odometer),n.a.createElement("p",null,n.a.createElement("strong",null,"Drop Off Odometer:")," ",e.drop_off_odometer||"N/A"),n.a.createElement("p",null,n.a.createElement("strong",null,"Pick Up Note:")," ",e.pick_up_note||"N/A"),n.a.createElement("p",null,n.a.createElement("strong",null,"Drop Off Note:")," ",e.drop_off_note||"N/A"),n.a.createElement("p",null,n.a.createElement("strong",null,"Fuel Details:")),e.fuel_details&&e.fuel_details.length>0&&n.a.createElement("ul",{className:"list-unstyled"},e.fuel_details.map((e,t)=>n.a.createElement("li",{key:t,className:"mb-3"},n.a.createElement("p",null,n.a.createElement("strong",null,"Amount:")," ",e.fuel_amount),n.a.createElement("p",null,n.a.createElement("strong",null,"Note:")," ",e.note),n.a.createElement("img",{src:e.fuel_receipt_photo,alt:"Fuel receipt",className:"img-thumbnail",style:{width:"100px",height:"100px",cursor:"pointer"},onClick:()=>v(e.fuel_receipt_photo),onError:e=>{e.target.onerror=null,e.target.src="default-image.png"}})))),n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement("strong",null,"Pick Up Photos:")),n.a.createElement("div",{className:"d-flex flex-wrap"},e.pick_up_photos&&Object.entries(e.pick_up_photos).map(e=>{let[t,a]=e;return n.a.createElement("img",{key:t,src:a,alt:"".concat(t," photo"),className:"img-thumbnail m-2",style:{width:"100px",height:"100px",cursor:"pointer"},onClick:()=>v(a),onError:e=>{e.target.onerror=null,e.target.src="default-image.png"}})}))),n.a.createElement("div",null,n.a.createElement("p",null,n.a.createElement("strong",null,"Drop Off Photos:")),n.a.createElement("div",{className:"d-flex flex-wrap"},e.drop_off_photos&&null!==e.drop_off_photos&&Object.entries(e.drop_off_photos).map(e=>{let[t,a]=e;return n.a.createElement("img",{key:t,src:a,alt:"".concat(t," photo"),className:"img-thumbnail m-2",style:{width:"100px",height:"100px",cursor:"pointer"},onClick:()=>v(a),onError:e=>{e.target.onerror=null,e.target.src="default-image.png"}})}))),e.trip_details&&n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,n.a.createElement("strong",null,"Trip Details:")),n.a.createElement("ul",{className:"list-unstyled"},n.a.createElement("li",null,n.a.createElement("strong",null,"Route No:")," ",e.trip_details.route_no),n.a.createElement("li",null,n.a.createElement("strong",null,"Total Deliveries:")," ",e.trip_details.total_deliveries),n.a.createElement("li",null,n.a.createElement("strong",null,"Return Deliveries:")," ",e.trip_details.return_deliveries),n.a.createElement("li",null,n.a.createElement("strong",null,"Successful Deliveries:")," ",e.trip_details.successful_deliveries),n.a.createElement("li",null,n.a.createElement("strong",null,"Note:")," ",e.trip_details.note))))))),s&&n.a.createElement("div",{className:"modal",style:T},n.a.createElement("span",{className:"close",style:L,onClick:()=>{u(null)}},"\xd7"),n.a.createElement("img",{className:"modal-content",src:s,style:F})))};var A=()=>{const[e,t]=Object(l.useState)("cars");return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("div",{className:"card shadow-sm p-4"},n.a.createElement("h2",{className:"card-title mb-4"},"Admin Dashboard"),n.a.createElement("ul",{className:"nav nav-tabs"},n.a.createElement("li",{className:"nav-item"},n.a.createElement("button",{className:"nav-link ".concat("cars"===e?"active":""),onClick:()=>t("cars")},"Cars")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("button",{className:"nav-link ".concat("trips"===e?"active":""),onClick:()=>t("trips")},"Trips")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("button",{className:"nav-link ".concat("drivers"===e?"active":""),onClick:()=>t("drivers")},"Drivers")),n.a.createElement("li",{className:"nav-item"},n.a.createElement("button",{className:"nav-link ".concat("owners"===e?"active":""),onClick:()=>t("owners")},"Car Owners"))),n.a.createElement("div",{className:"tab-content mt-4"},(()=>{switch(e){case"cars":return n.a.createElement(S,null);case"trips":return n.a.createElement(I,null);case"drivers":return n.a.createElement(D,null);case"owners":return n.a.createElement(R,null);default:return n.a.createElement(S,null)}})())))};var U=()=>{const{user:e,updateProfile:t}=Object(l.useContext)(d),[a,r]=Object(l.useState)({email:"",address:"",phone_number:""}),[c,o]=Object(l.useState)(!1);Object(l.useEffect)(()=>{e&&r({email:e.email||"",address:e.address||"",phone_number:e.phone_number||""})},[e]);const s=e=>{r({...a,[e.target.name]:e.target.value})};return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("div",{className:"card shadow-sm"},n.a.createElement("div",{className:"card-header"},n.a.createElement("h1",{className:"card-title"},"Profile")),n.a.createElement("div",{className:"card-body"},n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{await t(a),alert("Profile updated successfully"),o(!1)}catch(l){console.error("Profile update failed",l),alert("Profile update failed")}}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Username:"),n.a.createElement("input",{type:"text",name:"username",value:(null===e||void 0===e?void 0:e.username)||"",className:"form-control",disabled:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Role:"),n.a.createElement("input",{type:"text",name:"role",value:(null===e||void 0===e?void 0:e.role)||"",className:"form-control",disabled:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Status:"),n.a.createElement("input",{type:"text",name:"status",value:(null===e||void 0===e?void 0:e.status)||"",className:"form-control",disabled:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Email:"),n.a.createElement("input",{type:"email",name:"email",value:a.email,onChange:s,className:"form-control",disabled:!c})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Address:"),n.a.createElement("input",{type:"text",name:"address",value:a.address,onChange:s,className:"form-control",disabled:!c})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Phone Number:"),n.a.createElement("input",{type:"text",name:"phone_number",value:a.phone_number,onChange:s,className:"form-control",disabled:!c})),n.a.createElement("div",{className:"d-flex justify-content-between"},c?n.a.createElement("div",null,n.a.createElement("button",{type:"submit",className:"btn btn-primary mr-2"},"Update Profile"),n.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:()=>o(!1)},"Cancel")):n.a.createElement("button",{type:"button",className:"btn btn-secondary",onClick:()=>o(!0)},"Edit"))))))},M=a(14),z=a.n(M),q=(a(60),a(54)),G=a(36);var V=()=>{const[e,t]=Object(l.useState)(""),[a,r]=Object(l.useState)(null),[c,o]=Object(l.useState)(null),[u,p]=Object(l.useState)(null),[d,b]=Object(l.useState)(null),[E,g]=Object(l.useState)(null),[h,v]=Object(l.useState)(null),[f,N]=Object(l.useState)(""),[y,O]=Object(l.useState)(""),[k,_]=Object(l.useState)(!1),[j,C]=Object(l.useState)(1),[w,S]=Object(l.useState)(null),[P,D]=Object(l.useState)(""),[R,x]=Object(l.useState)(!1),[T,L]=Object(l.useState)(!1),[F,I]=Object(l.useState)(M.FACING_MODES.ENVIRONMENT),A=Object(s.p)(),{coords:U}=Object(G.useGeolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3});Object(l.useEffect)(()=>{if(U){(async()=>{try{const e=(await m.a.get("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(U.latitude,"&lon=").concat(U.longitude))).data.display_name;D(e)}catch(e){console.error("Error fetching address:",e)}})()}},[U]);const V=(e,t)=>{fetch(t).then(e=>e.blob()).then(t=>{const a=new File([t],"".concat(w,".jpg"),{type:"image/jpeg"});e(a)}),S(null)},B=e=>{switch(w){case"FrontPhoto":V(r,e);break;case"RearPhoto":V(o,e);break;case"LeftPhoto":V(p,e);break;case"RightPhoto":V(b,e);break;case"OdometerPhoto":V(g,e);break;case"OptionalPhoto":V(v,e)}};return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("form",{onSubmit:async t=>{if(t.preventDefault(),!f||!P)return void console.error("Pickup odometer and location are required.");const l=new FormData;l.append("car_id",e),l.append("front_photo",a),l.append("rear_photo",c),l.append("left_photo",u),l.append("right_photo",d),l.append("odometer_photo",E),l.append("optional_photo",h),l.append("pick_up_odometer",f),l.append("pick_up_location",P),l.append("pick_up_note",y);try{const e=localStorage.getItem("token"),t=await m.a.post("".concat(i,"/trips/api/start_trip/"),l,{headers:{Authorization:"Token ".concat(e)}});console.log("Trip started successfully:",t.data),A("/trip-actions",{state:{tripId:t.data.trip_id}})}catch(n){console.error("Error starting trip:",n.response.data)}},className:"card p-4 shadow-sm"},n.a.createElement("h2",{className:"mb-4"},"Start Trip"),1===j&&n.a.createElement("div",null,n.a.createElement("h3",null,"Scan or Enter Car ID"),k?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Enter Car ID",value:e,onChange:e=>t(e.target.value),required:!0})),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>C(2)},"Next")):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("div",{style:{width:"100%",margin:"0 auto",border:T?"3px solid green":"3px solid red"}},R?n.a.createElement(q.a,{delay:300,onError:e=>{console.error(e)},onResult:e=>{e&&(t(e),L(!0),setTimeout(()=>{x(!1),C(2),L(!1)},1e3))},constraints:{facingMode:"environment"},style:{width:"100%"}}):n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>x(!0)},"Scan QR Code"),n.a.createElement("button",{type:"button",className:"btn btn-secondary ms-2",onClick:()=>_(!0)},"Enter Manually")))))),2===j&&n.a.createElement("div",null,n.a.createElement("h3",null,"Take Car Photos"),w&&n.a.createElement("div",{className:"mb-3"},n.a.createElement(z.a,{onTakePhoto:e=>B(e),idealFacingMode:F,isImageMirror:!1,isFullscreen:!1}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("button",{className:"btn btn-secondary",onClick:()=>S(null)},"Cancel"))),!w&&n.a.createElement("div",null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>S("FrontPhoto")},"Take Front Photo"),a&&n.a.createElement("img",{src:URL.createObjectURL(a),alt:"Front",className:"img-thumbnail",width:"100"})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>S("RearPhoto")},"Take Rear Photo"),c&&n.a.createElement("img",{src:URL.createObjectURL(c),alt:"Rear",className:"img-thumbnail",width:"100"})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>S("LeftPhoto")},"Take Left Photo"),u&&n.a.createElement("img",{src:URL.createObjectURL(u),alt:"Left",className:"img-thumbnail",width:"100"})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>S("RightPhoto")},"Take Right Photo"),d&&n.a.createElement("img",{src:URL.createObjectURL(d),alt:"Right",className:"img-thumbnail",width:"100"})),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>C(3)},"Next"))),3===j&&n.a.createElement("div",null,n.a.createElement("h3",null,"Enter Odometer Details"),n.a.createElement("div",{className:"mb-3"},n.a.createElement("input",{type:"text",className:"form-control",placeholder:"Odometer Value",value:f,onChange:e=>N(e.target.value),required:!0})),w&&n.a.createElement("div",{className:"mb-3"},n.a.createElement(z.a,{onTakePhoto:e=>B(e),idealFacingMode:F,isImageMirror:!1,isFullscreen:!1}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("button",{className:"btn btn-secondary",onClick:()=>S(null)},"Cancel"))),!w&&n.a.createElement("div",null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>S("OdometerPhoto")},"Take Odometer Photo"),E&&n.a.createElement("img",{src:URL.createObjectURL(E),alt:"Odometer",className:"img-thumbnail",width:"100"})),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>C(4)},"Next"))),4===j&&n.a.createElement("div",null,n.a.createElement("h3",null,"Optional Details"),n.a.createElement("div",{className:"mb-3"},n.a.createElement("textarea",{className:"form-control",placeholder:"Pick up note",value:y,onChange:e=>O(e.target.value)})),w&&n.a.createElement("div",{className:"mb-3"},n.a.createElement(z.a,{onTakePhoto:e=>B(e),idealFacingMode:F,isImageMirror:!1,isFullscreen:!1}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("button",{className:"btn btn-secondary",onClick:()=>S(null)},"Cancel"))),!w&&n.a.createElement("div",null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>S("OptionalPhoto")},"Take Optional Photo"),h&&n.a.createElement("img",{src:URL.createObjectURL(h),alt:"Optional",className:"img-thumbnail",width:"100"})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Start Trip")))))};var B=()=>{var e;const[t,a]=Object(l.useState)(""),[r,c]=Object(l.useState)(null),[o,u]=Object(l.useState)(""),[p,d]=Object(l.useState)(null),[b,E]=Object(l.useState)(M.FACING_MODES.ENVIRONMENT),g=Object(s.p)(),h=null===(e=Object(s.n)().state)||void 0===e?void 0:e.tripId,v=e=>{"FuelReceiptPhoto"===p&&((e,t)=>{fetch(t).then(e=>e.blob()).then(t=>{const a=new File([t],"".concat(p,".jpg"),{type:"image/jpeg"});e(a)}),d(null)})(c,e)};return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();const a=new FormData;a.append("trip_id",h),a.append("fuel_amount",t),a.append("fuel_receipt_photo",r),a.append("note",o);try{const e=localStorage.getItem("token"),t=await m.a.post("".concat(i,"/trips/api/add_fuel/"),a,{headers:{Authorization:"Token ".concat(e)}});console.log("Fuel added successfully:",t.data),g("/trip-actions",{state:{tripId:h}})}catch(l){console.error("Error adding fuel:",l.response.data)}},className:"card p-4 shadow-sm"},n.a.createElement("h2",{className:"mb-4"},"Add Fuel"),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Fuel Amount"),n.a.createElement("input",{type:"text",className:"form-control",value:t,onChange:e=>a(e.target.value),required:!0})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Fuel Receipt Photo"),p&&n.a.createElement("div",{className:"mb-3"},n.a.createElement(z.a,{onTakePhoto:e=>v(e),idealFacingMode:b,isImageMirror:!1,isFullscreen:!1}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("button",{className:"btn btn-secondary",onClick:()=>d(null)},"Cancel"))),!p&&n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>d("FuelReceiptPhoto")},"Take Fuel Receipt Photo"),r&&n.a.createElement("img",{src:URL.createObjectURL(r),alt:"Fuel Receipt",className:"img-thumbnail",width:"100"}))),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Note"),n.a.createElement("textarea",{className:"form-control",value:o,onChange:e=>u(e.target.value)})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add Fuel")))};var H=()=>{var e;const t=null===(e=Object(s.n)().state)||void 0===e?void 0:e.tripId,[a,r]=Object(l.useState)(""),[c,o]=Object(l.useState)(""),[u,p]=Object(l.useState)(""),[d,b]=Object(l.useState)(""),[E,g]=Object(l.useState)(""),h=Object(s.p)();return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();const l=new FormData;l.append("trip_id",t),l.append("route_no",a),l.append("total_deliveries",c),l.append("return_deliveries",u),l.append("successful_deliveries",d),l.append("note",E);try{const e=localStorage.getItem("token"),a=await m.a.post("".concat(i,"/trips/api/complete_trip/"),l,{headers:{Authorization:"Token ".concat(e)}});console.log("Trip completed successfully:",a.data),h("/drop-off",{state:{tripId:t}})}catch(n){console.error("Error completing trip:",n.response.data)}},className:"card p-4 shadow-sm"},n.a.createElement("h2",{className:"mb-4"},"Complete Trip"),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Route No"),n.a.createElement("input",{type:"text",className:"form-control",value:a,onChange:e=>r(e.target.value),required:!0})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Total Deliveries"),n.a.createElement("input",{type:"text",className:"form-control",value:c,onChange:e=>o(e.target.value),required:!0})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Return Deliveries"),n.a.createElement("input",{type:"text",className:"form-control",value:u,onChange:e=>p(e.target.value),required:!0})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Successful Deliveries"),n.a.createElement("input",{type:"text",className:"form-control",value:d,onChange:e=>b(e.target.value),required:!0})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Note"),n.a.createElement("textarea",{className:"form-control",value:E,onChange:e=>g(e.target.value)})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Complete Trip")))};var J=()=>{var e;const t=null===(e=Object(s.n)().state)||void 0===e?void 0:e.tripId,[a,r]=Object(l.useState)(null),[c,o]=Object(l.useState)(null),[u,p]=Object(l.useState)(null),[d,b]=Object(l.useState)(null),[E,g]=Object(l.useState)(null),[h,v]=Object(l.useState)(null),[f,N]=Object(l.useState)(""),[y,O]=Object(l.useState)(""),[k,_]=Object(l.useState)(""),[j,C]=Object(l.useState)(null),[w,S]=Object(l.useState)(1),[P,D]=Object(l.useState)(M.FACING_MODES.ENVIRONMENT),R=Object(s.p)(),{coords:x}=Object(G.useGeolocated)({positionOptions:{enableHighAccuracy:!0},userDecisionTimeout:5e3});Object(l.useEffect)(()=>{if(x){(async()=>{try{const e=(await m.a.get("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=".concat(x.latitude,"&lon=").concat(x.longitude))).data.display_name;O(e)}catch(e){console.error("Error fetching address:",e)}})()}},[x]);const T=(e,t)=>{fetch(t).then(e=>e.blob()).then(t=>{const a=new File([t],"".concat(j,".jpg"),{type:"image/jpeg"});e(a)}),C(null)},L=e=>{switch(j){case"DropOffFrontPhoto":T(r,e);break;case"DropOffRearPhoto":T(o,e);break;case"DropOffLeftPhoto":T(p,e);break;case"DropOffRightPhoto":T(b,e);break;case"DropOffOdometerPhoto":T(g,e);break;case"DropOffOptionalPhoto":T(v,e)}};return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("form",{onSubmit:async e=>{e.preventDefault();const l=new FormData;l.append("trip_id",t),l.append("drop_off_front_photo",a),l.append("drop_off_rear_photo",c),l.append("drop_off_left_photo",u),l.append("drop_off_right_photo",d),l.append("drop_off_odometer_photo",E),l.append("drop_off_optional_photo",h),l.append("drop_off_odometer",f),l.append("drop_off_location",y),l.append("drop_off_note",k);try{const e=localStorage.getItem("token"),t=await m.a.post("".concat(i,"/trips/api/drop_off/"),l,{headers:{Authorization:"Token ".concat(e)}});console.log("Drop-off completed successfully:",t.data),R("/dashboard")}catch(n){console.error("Error during drop-off:",n.response.data)}},className:"card p-4 shadow-sm"},n.a.createElement("h2",{className:"mb-4"},"Drop Off Car"),1===w&&n.a.createElement("div",null,n.a.createElement("h3",null,"Take Car Photos"),j&&n.a.createElement("div",{className:"mb-3"},n.a.createElement(z.a,{onTakePhoto:e=>L(e),idealFacingMode:P,isImageMirror:!1,isFullscreen:!1}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("button",{className:"btn btn-secondary",onClick:()=>C(null)},"Cancel"))),!j&&n.a.createElement("div",null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>C("DropOffFrontPhoto")},"Take Front Photo"),a&&n.a.createElement("img",{src:URL.createObjectURL(a),alt:"Front",className:"img-thumbnail",width:"100"})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>C("DropOffRearPhoto")},"Take Rear Photo"),c&&n.a.createElement("img",{src:URL.createObjectURL(c),alt:"Rear",className:"img-thumbnail",width:"100"})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>C("DropOffLeftPhoto")},"Take Left Photo"),u&&n.a.createElement("img",{src:URL.createObjectURL(u),alt:"Left",className:"img-thumbnail",width:"100"})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>C("DropOffRightPhoto")},"Take Right Photo"),d&&n.a.createElement("img",{src:URL.createObjectURL(d),alt:"Right",className:"img-thumbnail",width:"100"})),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>S(2)},"Next"))),2===w&&n.a.createElement("div",null,n.a.createElement("h3",null,"Take Odometer Photo"),j&&n.a.createElement("div",{className:"mb-3"},n.a.createElement(z.a,{onTakePhoto:e=>L(e),idealFacingMode:P,isImageMirror:!1,isFullscreen:!1}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("button",{className:"btn btn-secondary",onClick:()=>C(null)},"Cancel"))),!j&&n.a.createElement("div",null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>C("DropOffOdometerPhoto")},"Take Odometer Photo"),E&&n.a.createElement("img",{src:URL.createObjectURL(E),alt:"Odometer",className:"img-thumbnail",width:"100"})),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>S(3)},"Next"))),3===w&&n.a.createElement("div",null,n.a.createElement("h3",null,"Enter Odometer and Location Details"),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Odometer Reading"),n.a.createElement("input",{type:"text",className:"form-control",value:f,onChange:e=>N(e.target.value),required:!0})),n.a.createElement("div",{className:"mb-3"},n.a.createElement("label",{className:"form-label"},"Drop Off Location"),n.a.createElement("input",{type:"text",className:"form-control",value:y,readOnly:!0}),y&&n.a.createElement("a",{href:"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(y)),target:"_blank",rel:"noopener noreferrer",className:"btn btn-link"},"View on Google Maps")),n.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:()=>S(4)},"Next")),4===w&&n.a.createElement("div",null,n.a.createElement("h3",null,"Optional Details"),n.a.createElement("div",{className:"mb-3"},n.a.createElement("textarea",{className:"form-control",placeholder:"Drop off note",value:k,onChange:e=>_(e.target.value)})),j&&n.a.createElement("div",{className:"mb-3"},n.a.createElement(z.a,{onTakePhoto:e=>L(e),idealFacingMode:P,isImageMirror:!1,isFullscreen:!1}),n.a.createElement("div",{className:"mt-2"},n.a.createElement("button",{className:"btn btn-secondary",onClick:()=>C(null)},"Cancel"))),!j&&n.a.createElement("div",null,n.a.createElement("div",{className:"mb-3"},n.a.createElement("button",{type:"button",className:"btn btn-outline-primary me-2",onClick:()=>C("DropOffOptionalPhoto")},"Take Optional Photo"),h&&n.a.createElement("img",{src:URL.createObjectURL(h),alt:"Optional",className:"img-thumbnail",width:"100"})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Complete Drop Off")))))};var Q=()=>{var e;const t=Object(s.p)(),a=null===(e=Object(s.n)().state)||void 0===e?void 0:e.tripId;return n.a.createElement("div",{className:"container mt-5"},n.a.createElement("div",{className:"card shadow-sm p-4"},n.a.createElement("h2",{className:"card-title mb-4"},"Trip Actions"),n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},n.a.createElement("span",null,"Add Fuel"),n.a.createElement("button",{className:"btn btn-outline-primary",onClick:()=>{t("/add-fuel",{state:{tripId:a}})}},"Add Fuel")),n.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},n.a.createElement("span",null,"Complete Trip"),n.a.createElement("button",{className:"btn btn-outline-primary",onClick:()=>{t("/complete-trip",{state:{tripId:a}})}},"Complete Trip")))))};var W=()=>{const e=Object(s.p)(),t=Object(s.n)(),{user:a}=Object(l.useContext)(d),r="default"!==t.key;return n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},n.a.createElement("div",{style:{paddingTop:"100px"}}),n.a.createElement("div",{className:"container-fluid"},n.a.createElement("span",{className:"navbar-brand mb-0 h1"},"My WebApp"),n.a.createElement("div",{className:"d-flex"},r&&n.a.createElement("button",{className:"btn btn-secondary me-2",onClick:()=>{e(-1)}},"Back"))))};a(68);const Y=e=>{let{component:t}=e;const{user:a}=Object(l.useContext)(d);return Object(l.useEffect)(()=>{console.log("PrivateRoute user:",a)},[a]),a?n.a.createElement(t,null):n.a.createElement(s.a,{to:"/login"})},K=()=>{const{user:e}=Object(l.useContext)(d);if(Object(l.useEffect)(()=>{console.log("Dashboard user:",e)},[e]),!e)return n.a.createElement(s.a,{to:"/login"});switch(e.role){case"driver":return n.a.createElement(g,null);case"renter":return n.a.createElement(h,null);case"admin":return n.a.createElement(A,null);default:return n.a.createElement(s.a,{to:"/login"})}};var X=()=>n.a.createElement(p,null,n.a.createElement(o.a,null,n.a.createElement(W,null),n.a.createElement(s.d,null,n.a.createElement(s.b,{path:"/login",element:n.a.createElement(b,null)}),n.a.createElement(s.b,{path:"/register",element:n.a.createElement(E,null)}),n.a.createElement(s.b,{path:"/profile",element:n.a.createElement(Y,{component:U})}),n.a.createElement(s.b,{path:"/dashboard",element:n.a.createElement(Y,{component:K})}),n.a.createElement(s.b,{path:"/start-trip",element:n.a.createElement(Y,{component:V})}),n.a.createElement(s.b,{path:"/trip-actions",element:n.a.createElement(Y,{component:Q})}),n.a.createElement(s.b,{path:"/manage-cars",element:n.a.createElement(Y,{component:S})}),n.a.createElement(s.b,{path:"/add-fuel",element:n.a.createElement(Y,{component:B})}),n.a.createElement(s.b,{path:"/complete-trip",element:n.a.createElement(Y,{component:H})}),n.a.createElement(s.b,{path:"/drop-off",element:n.a.createElement(Y,{component:J})}),n.a.createElement(s.b,{path:"/previous-trips",element:n.a.createElement(Y,{component:I})}),n.a.createElement(s.b,{path:"*",element:n.a.createElement(s.a,{to:"/login"})}))));c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(p,null,n.a.createElement(X,null))),document.getElementById("root"))}},[[71,1,2]]]);
//# sourceMappingURL=main.ab6b62d5.chunk.js.map